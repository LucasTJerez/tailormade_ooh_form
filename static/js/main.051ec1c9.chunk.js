(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{188:function(e,a,t){e.exports=t(328)},196:function(e,a,t){},272:function(e,a){},327:function(e){e.exports=JSON.parse('{"sampleReach":{"dateCreated":"2020-07-30","reachName":"Helper reachName","locations":["Sevilla","Valencia"],"start":"2020-08-12","end":"2020-08-28","backtrackStart":"2020-05-12","backtrackEnd":"2020-05-28","mediums":["Paper","Digital"],"ages":["19-26","27-39"],"selectedSegments":["Cars","Planes"],"genders":["Men","Women"]},"names":{"mediumNames":["Paper","Digital"],"ageNames":["19-26","27-39","40-49","50-65","60-90"],"genderNames":["Men","Women"]},"helperTexts":{"valid":{"reachName":"Name your reach","locations":"Select locations to advertise in","date":"Select a period of time for advertising","backtrack":"Select period of backtrack data","mediums":"Select advertisement mediums","ages":"Select target audience age groups","segments":"Select market segments that fit your product","genders":"Select target genders","comments":"Is there anything else you\'d like to add?"},"error":{"reachName":["Must be more than four characters","Cannot contain a space"],"locations":["Select at least one city"],"date":["Must be at most 15 days","Choose a start and end date"],"mediums":["Choose at least one age group"],"ages":["Choose at least one age group"],"segments":["Select at least one segment"],"genders":["Select at least one gender"]}}}')},328:function(e,a,t){"use strict";t.r(a);t(189);var n=t(0),r=t.n(n),c=t(171),l=(t(196),t(377)),s=t(367),i=t(378),o=t(181),m=t(15),d=t(172),u=t(173),h=t(179),g=t(178),p=t(382),f=t(369),E=t(380),v=t(70),b=t(9),k=t.n(b),D=t(6),S=t(362),O=t(366),N=t(383),y=t(370),j=t(371),C=t(379),x=t(373),I=t(374),R=t(384),F=t(375),T=t(381),H=t(376),V=(t(265),t(309),t(310).default),w=function(e){Object(h.a)(n,e);var a=Object(g.a)(n);function n(e){var r;Object(d.a)(this,n),(r=a.call(this,e)).state={reachData:{reachName:"",segments:[],genders:[],ages:[],locations:[],mediums:[],start:null,end:null,backtrackStart:null,backtrackEnd:null,comments:""},formData:{sampleReach:{},names:{},helperTexts:{},segments:[],locations:[],focusedInput:null,backtrackFocusedInput:null},validations:{formHasError:!1,fieldHasError:{reachName:!1,locations:!1,date:!1,mediums:!1,ages:!1,segments:!1,genders:!1},helperTexts:{reachName:"",locations:"",date:"",mediums:"",ages:"",segments:"",comments:"",genders:"",backtrack:""}}},r.handleDuration=function(e){var a=r.state,t=a.reachData,n=a.validations,c=e.startDate,l=e.endDate,s=n;c&&l&&l.diff(c,"days")>15?(s=r.setValidation(s,"date",0),l=null):s=r.setValidation(s,"date",-1),r.setState({reachData:Object(m.a)(Object(m.a)({},t),{},{start:c,end:l}),validations:s})},r.handleBacktrack=function(e){var a=r.state.reachData,t=e.startDate,n=e.endDate;r.setState({reachData:Object(m.a)(Object(m.a)({},a),{},{backtrackStart:t,backtrackEnd:n})})};var c=r.state,l=c.formData,s=c.validations,i=t(327),o=l;for(var u in i)o[u]=i[u];var h=s;return h.helperTexts=o.helperTexts.valid,r.state=Object(m.a)(Object(m.a)({},r.state),{},{formData:o,validations:h}),r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.state.formData;if(null===localStorage.getItem("calculatedReaches")){var a={[e.sampleReach.reachName]:e.sampleReach};localStorage.setItem("calculatedReaches",JSON.stringify(a))}var t=V.create({baseURL:"https://dev-di-audience-api.apps-dev.tid.es/rest/v1",timeout:2e4,withCredentials:!0,responseType:"json",headers:{"Content-Type":"application/json",Authorization:"Bearer dG1hZHNAdG1hZHM6dWlHekRFd0FoZ0FndGdXWWN0eEFSY21iR2U5RHNIODF6SUZudEUyR0g5czNLNHFIc1V5bHhnVnRraHVCTDVVOVZwRGM3WXBOaFlvSVpLNUc3V2E3T3c"}}),n=[],r=[],c=t.get("enum/segments/items"),l=t.get("enum/provinces/items");V.all([l,c]).then(V.spread((function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];a[0].data.enumItems.items.map((function(e){r.push(e.displayValue)})),a[1].data.enumItems.items.map((function(e){n.push(e.value)}))}))).catch((function(e){alert(e)})),this.setState({formData:Object(m.a)(Object(m.a)({},e),{},{segments:n,locations:r})})}},{key:"getFieldErrors",value:function(){var e=this.state.validations.fieldHasError,a="";return Object.keys(e).forEach((function(t){e[t]&&(a+="reachName"===t?"reach name, ":t+", ")})),a.slice(0,a.length-2)}},{key:"setValidation",value:function(e,a,t){var n=this.state.formData.helperTexts,r="",c=-1!==t;return r=c?n.error[a][t]:n.valid[a],e=Object(m.a)(Object(m.a)({},e),{},{fieldHasError:Object(m.a)(Object(m.a)({},e.fieldHasError),{},{[a]:c}),helperTexts:Object(m.a)(Object(m.a)({},e.helperTexts),{},{[a]:r})})}},{key:"validateList",value:function(e){var a=this,t=this.state.reachData;return Object.keys(t).forEach((function(n){Array.isArray(t[n])&&(e=0===t[n].length?a.setValidation(e,n,0):a.setValidation(e,n,-1))})),e}},{key:"validateFails",value:function(e){var a=this.state,t=a.reachData,n=a.validations,r=t.reachName,c=t.start,l=t.end,s=n;s=r.length<4?this.setValidation(s,"reachName",0):r.includes(" ")?this.setValidation(s,"reachName",1):this.setValidation(s,"reachName",-1),null!==c&&null!==l||(s=this.setValidation(s,"date",1)),((s=this.validateList(s)).formHasError=Object.values(s.fieldHasError).includes(!0))&&window.scrollTo(0,0),this.setState({validations:s})}},{key:"handleChange",value:function(e){var a=e.target.name,t=e.target.value,n=this.state.reachData;n[a]=t,this.setState({reachData:n})}},{key:"handleSelectChange",value:function(e){var a=e.target.name,t=e.target.value,n=this.state.reachData,r=n[a];-1===r.indexOf(t)?r.push(t):r.splice(r.indexOf(t),1),n[a]=r,this.setState({reachData:n})}},{key:"uploadFormula",value:function(){if(this.validateFails(),!this.state.validations.formHasError){var e=JSON.parse(localStorage.getItem("calculatedReaches")),a=this.state.reachData,t=new Date,n=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),c=t.getFullYear();t=r+"/"+n+"/"+c,a.dateCreated=t,e[a.reachName]=a,localStorage.setItem("calculatedReaches",JSON.stringify(e))}}},{key:"render",value:function(){var e=this,a=this.props.classes,t=this.state,n=t.reachData,c=t.validations,l=t.formData,s=n.mediums,i=n.start,o=n.end,d=n.backtrackStart,u=n.backtrackEnd,h=n.ages,g=n.genders,b=c.fieldHasError,D=c.helperTexts;return r.a.createElement(S.a,{container:!0,direction:"column",spacing:3},r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(O.a,{in:this.state.validations.formHasError},r.a.createElement(p.a,{className:a.alert,severity:"error"},r.a.createElement(f.a,null,"Error"),"Fields:",r.a.createElement("strong",null," "+this.getFieldErrors()))),r.a.createElement(N.a,{error:b.reachName},r.a.createElement(y.a,null,"Reach Name"),r.a.createElement(j.a,{row:!0},r.a.createElement(C.a,{variant:"outlined",name:"reachName",onChange:this.handleChange.bind(this),error:b.reachName})),r.a.createElement(x.a,null,D.reachName)),r.a.createElement(I.a,{className:a.divider}),r.a.createElement(E.a,{multiple:!0,id:"tags-filled",options:l.segments,value:n.segments,onChange:function(a,t){e.setState({reachData:Object(m.a)(Object(m.a)({},n),{},{segments:t})})},renderTags:function(e,a){return e.map((function(e,t){return r.a.createElement(R.a,Object.assign({label:e},a({index:t})))}))},renderInput:function(e){return r.a.createElement(N.a,{error:b.segments},r.a.createElement(y.a,null,"Segments"),r.a.createElement(C.a,Object.assign({error:b.segments},e,{variant:"outlined",placeholder:"Search here"})),r.a.createElement(x.a,null,D.segments))}}),r.a.createElement(I.a,{className:a.divider}),r.a.createElement(E.a,{multiple:!0,id:"tags-filled",options:l.locations,value:n.locations,onChange:function(a,t){e.setState({reachData:Object(m.a)(Object(m.a)({},n),{},{locations:t})})},renderTags:function(e,a){return e.map((function(e,t){return r.a.createElement(R.a,Object.assign({label:e},a({index:t})))}))},renderInput:function(e){return r.a.createElement(N.a,{error:b.locations},r.a.createElement(y.a,null,"Locations"),r.a.createElement(C.a,Object.assign({error:b.locations},e,{variant:"outlined",placeholder:"Search here"})),r.a.createElement(x.a,null,D.locations))}}),r.a.createElement(I.a,{className:a.divider}),r.a.createElement(N.a,{error:b.genders},r.a.createElement(y.a,null,"Genders"),r.a.createElement(j.a,{row:!0},l.names.genderNames.map((function(a){return r.a.createElement(F.a,{key:a,control:r.a.createElement(T.a,{color:"primary",checked:g.indexOf(a)>-1,name:"genders",value:a,onChange:e.handleSelectChange.bind(e)}),label:a})}))),r.a.createElement(x.a,null,D.genders)),r.a.createElement(I.a,{light:!0,className:a.divider}),r.a.createElement(N.a,{error:b.ages},r.a.createElement(y.a,null,"Ages"),r.a.createElement(j.a,{row:!0},l.names.ageNames.map((function(a){return r.a.createElement(F.a,{key:a,control:r.a.createElement(T.a,{name:"ages",value:a,onChange:e.handleSelectChange.bind(e),color:"primary",checked:h.indexOf(a)>-1}),label:a})}))),r.a.createElement(x.a,null,D.ages)),r.a.createElement(I.a,{className:a.divider}),r.a.createElement(N.a,{error:b.mediums},r.a.createElement(y.a,null,"Mediums"),r.a.createElement(j.a,{row:!0},l.names.mediumNames.map((function(a){return r.a.createElement(F.a,{key:a,control:r.a.createElement(T.a,{color:"primary",checked:s.indexOf(a)>-1,name:"mediums",value:a,onChange:e.handleSelectChange.bind(e)}),label:a})}))),r.a.createElement(x.a,null,D.mediums)),r.a.createElement(I.a,{light:!0,className:a.divider}),r.a.createElement(N.a,{error:b.date},r.a.createElement(y.a,null,"Duration"),r.a.createElement(j.a,{row:!0},r.a.createElement(v.DateRangePicker,{startDateId:"durationStart",endDateId:"durationEnd",firstDayOfWeek:1,startDate:i,endDate:o,displayFormat:"DD-MM-YYYY",focusedInput:l.focusedInput,onFocusChange:function(a){return e.setState({formData:Object(m.a)(Object(m.a)({},l),{},{focusedInput:a})})},onDatesChange:this.handleDuration,startDatePlaceholderText:" Start date",endDatePlaceholderText:" End date"})),r.a.createElement(x.a,null,D.date)),r.a.createElement(I.a,{className:a.divider}),r.a.createElement(N.a,{error:c.backtrack},r.a.createElement(y.a,null,"Backtrack Data"),r.a.createElement(j.a,{row:!0},r.a.createElement(v.DateRangePicker,{startDateId:"backtrackStart",endDateId:"backtrackEnd",isOutsideRange:function(e){return!Object(v.isInclusivelyBeforeDay)(e,k()())},firstDayOfWeek:1,startDate:d,endDate:u,displayFormat:"DD-MM-YYYY",focusedInput:l.backtrackFocusedInput,onFocusChange:function(a){return e.setState({formData:Object(m.a)(Object(m.a)({},l),{},{backtrackFocusedInput:a})})},onDatesChange:this.handleBacktrack,startDatePlaceholderText:" Start date",endDatePlaceholderText:" End date"})),r.a.createElement(x.a,null,"*optional: use data from a period of time")),r.a.createElement(I.a,{className:a.divider}),r.a.createElement(N.a,null,r.a.createElement(j.a,{component:"legend"},r.a.createElement(y.a,null,"Comments"),r.a.createElement(C.a,{name:"comments",onChange:this.handleChange.bind(this),color:"primary",multiline:!0,variant:"outlined"})),r.a.createElement(x.a,null,D.comments))),r.a.createElement(H.a,{className:a.buttons,onClick:function(){return e.uploadFormula()},variant:"contained",size:"large",color:"primary"},"Submit"))}}]),n}(n.Component),M=Object(D.a)((function(e){return{root:{flexGrow:1},divider:{marginTop:e.spacing(2.5),marginBottom:e.spacing(2.5)},buttons:{margin:"auto"},alert:{marginBottom:e.spacing(2.5)}}}),{withTheme:!0})(w),Y=Object(l.a)((function(e){return{root:{flexGrow:1,backgroundColor:"#757ce8"},paper:{marginLeft:e.spacing(8),marginRight:e.spacing(8)},calculateReach:{padding:e.spacing(4)}}}));function P(){var e=Y();return r.a.createElement("div",{className:e.root},r.a.createElement(s.a,{className:e.paper},r.a.createElement(i.a,null,r.a.createElement(o.a,{color:"textSecondary",className:e.title,variant:"h4",noWrap:!0},"Out-of-Home Reach Request Form")),r.a.createElement("div",{className:e.calculateReach},r.a.createElement(M,null))))}Object(c.render)(r.a.createElement(P,null),document.querySelector("#root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.051ec1c9.chunk.js.map