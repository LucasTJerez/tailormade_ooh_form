(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{184:function(e,a,t){e.exports=t(324)},192:function(e,a,t){},268:function(e,a){},323:function(e){e.exports=JSON.parse('{"sampleReach":{"dateCreated":"2020-07-30","reachName":"Helper reachName","locations":["Sevilla","Valencia"],"start":"2020-08-12","end":"2020-08-28","backtrackStart":"2020-05-12","backtrackEnd":"2020-05-28","mediums":["Paper","Digital"],"ages":["19-26","27-39"],"selectedSegments":["Cars","Planes"],"genders":["Men","Women"]},"names":{"mediumNames":["Paper","Digital"],"ageNames":["19-26","27-39","40-49","50-65","60-90"],"genderNames":["Men","Women"]},"helperTexts":{"valid":{"reachName":"Name your reach","locations":"Select locations to advertise in","date":"Select a period of time for advertising","backtrack":"Select period of backtrack data","mediums":"Select advertisement mediums","ages":"Select target audience age groups","segments":"Select market segments that fit your product","genders":"Select target genders","comments":"Is there anything else you\'d like to add?"},"error":{"reachName":["Must be more than four characters","Cannot contain a space"],"locations":["Select at least one city"],"date":["Must be at most 15 days","Choose a start and end date"],"mediums":["Choose at least one age group"],"ages":["Choose at least one age group"],"segments":["Select at least one segment"],"genders":["Select at least one gender"]}}}')},324:function(e,a,t){"use strict";t.r(a);t(185);var r=t(0),n=t.n(r),s=t(171),l=(t(192),t(373)),c=t(363),i=t(374),o=t(177),m=t(15),d=t(378),h=t(365),u=t(376),g=t(70),p=t(9),E=t.n(p),b=t(6),f=t(358),D=t(362),k=t(379),v=t(366),S=t(367),N=t(375),O=t(369),j=t(370),y=t(380),C=t(371),x=t(377),I=t(372);t(261),t(305);const R=t(306).default;class F extends r.Component{constructor(e){super(e),this.state={reachData:{reachName:"",segments:[],genders:[],ages:[],locations:[],mediums:[],start:null,end:null,backtrackStart:null,backtrackEnd:null,comments:""},formData:{sampleReach:{},names:{},helperTexts:{},segments:[],locations:[],focusedInput:null,backtrackFocusedInput:null},validations:{formHasError:!1,fieldHasError:{reachName:!1,locations:!1,date:!1,mediums:!1,ages:!1,segments:!1,genders:!1},helperTexts:{reachName:"",locations:"",date:"",mediums:"",ages:"",segments:"",comments:"",genders:"",backtrack:""}}},this.handleDuration=e=>{const a=this.state,t=a.reachData,r=a.validations;let n=e.startDate,s=e.endDate,l=r;n&&s&&s.diff(n,"days")>15?(l=this.setValidation(l,"date",0),s=null):l=this.setValidation(l,"date",-1),this.setState({reachData:Object(m.a)(Object(m.a)({},t),{},{start:n,end:s}),validations:l})},this.handleBacktrack=e=>{const a=this.state.reachData;let t=e.startDate,r=e.endDate;this.setState({reachData:Object(m.a)(Object(m.a)({},a),{},{backtrackStart:t,backtrackEnd:r})})};const a=this.state,r=a.formData,n=a.validations;let s=t(323),l=r;for(var c in s)l[c]=s[c];let i=n;i.helperTexts=l.helperTexts.valid,this.state=Object(m.a)(Object(m.a)({},this.state),{},{formData:l,validations:i})}componentDidMount(){const e=this.state.formData;if(null===localStorage.getItem("calculatedReaches")){let a={[e.sampleReach.reachName]:e.sampleReach};localStorage.setItem("calculatedReaches",JSON.stringify(a))}const a=R.create({baseURL:"https://dev-di-audience-api.apps-dev.tid.es/rest/v1",timeout:2e4,withCredentials:!0,responseType:"json",headers:{"Content-Type":"application/json",Authorization:"Bearer dG1hZHNAdG1hZHM6dWlHekRFd0FoZ0FndGdXWWN0eEFSY21iR2U5RHNIODF6SUZudEUyR0g5czNLNHFIc1V5bHhnVnRraHVCTDVVOVZwRGM3WXBOaFlvSVpLNUc3V2E3T3c"}});let t=[],r=[],n=a.get("enum/segments/items"),s=a.get("enum/provinces/items");R.all([s,n]).then(R.spread((...e)=>{e[0].data.enumItems.items.map(e=>{r.push(e.displayValue)}),e[1].data.enumItems.items.map(e=>{t.push(e.value)})})).catch(e=>{alert(e)}),this.setState({formData:Object(m.a)(Object(m.a)({},e),{},{segments:t,locations:r})})}getFieldErrors(){const e=this.state.validations.fieldHasError;let a="";return Object.keys(e).forEach(t=>{e[t]&&(a+="reachName"===t?"reach name, ":t+", ")}),a.slice(0,a.length-2)}setValidation(e,a,t){const r=this.state.formData.helperTexts;let n="",s=-1!==t;return n=s?r.error[a][t]:r.valid[a],e=Object(m.a)(Object(m.a)({},e),{},{fieldHasError:Object(m.a)(Object(m.a)({},e.fieldHasError),{},{[a]:s}),helperTexts:Object(m.a)(Object(m.a)({},e.helperTexts),{},{[a]:n})})}validateList(e){let a=this.state.reachData;return Object.keys(a).forEach(t=>{Array.isArray(a[t])&&(e=0===a[t].length?this.setValidation(e,t,0):this.setValidation(e,t,-1))}),e}validateFails(e){const a=this.state,t=a.reachData,r=a.validations,n=t.reachName,s=t.start,l=t.end;let c=r;c=n.length<4?this.setValidation(c,"reachName",0):n.includes(" ")?this.setValidation(c,"reachName",1):this.setValidation(c,"reachName",-1),null!==s&&null!==l||(c=this.setValidation(c,"date",1)),c=this.validateList(c),(c.formHasError=Object.values(c.fieldHasError).includes(!0))&&window.scrollTo(0,0),this.setState({validations:c})}handleChange(e){let a=e.target.name,t=e.target.value,r=this.state.reachData;r[a]=t,this.setState({reachData:r})}handleSelectChange(e){let a=e.target.name,t=e.target.value,r=this.state.reachData,n=r[a];-1===n.indexOf(t)?n.push(t):n.splice(n.indexOf(t),1),r[a]=n,this.setState({reachData:r})}uploadFormula(){if(this.validateFails(),!this.state.validations.formHasError){const n=JSON.parse(localStorage.getItem("calculatedReaches")),s=this.state.reachData;var e=new Date,a=String(e.getDate()).padStart(2,"0"),t=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();e=t+"/"+a+"/"+r,s.dateCreated=e,n[s.reachName]=s,localStorage.setItem("calculatedReaches",JSON.stringify(n))}}render(){const e=this.props.classes,a=this.state,t=a.reachData,r=a.validations,s=a.formData,l=t.mediums,c=t.start,i=t.end,o=t.backtrackStart,p=t.backtrackEnd,b=t.ages,R=t.genders,F=r.fieldHasError,T=r.helperTexts;return n.a.createElement(f.a,{container:!0,direction:"column",spacing:3},n.a.createElement(f.a,{item:!0,xs:12},n.a.createElement(D.a,{in:this.state.validations.formHasError},n.a.createElement(d.a,{className:e.alert,severity:"error"},n.a.createElement(h.a,null,"Error"),"Fields:",n.a.createElement("strong",null," "+this.getFieldErrors()))),n.a.createElement(k.a,{error:F.reachName},n.a.createElement(v.a,null,"Reach Name"),n.a.createElement(S.a,{row:!0},n.a.createElement(N.a,{variant:"outlined",name:"reachName",onChange:this.handleChange.bind(this),error:F.reachName})),n.a.createElement(O.a,null,T.reachName)),n.a.createElement(j.a,{className:e.divider}),n.a.createElement(u.a,{multiple:!0,id:"tags-filled",options:s.segments,value:t.segments,onChange:(e,a)=>{this.setState({reachData:Object(m.a)(Object(m.a)({},t),{},{segments:a})})},renderTags:(e,a)=>e.map((e,t)=>n.a.createElement(y.a,Object.assign({label:e},a({index:t})))),renderInput:e=>n.a.createElement(k.a,{error:F.segments},n.a.createElement(v.a,null,"Segments"),n.a.createElement(N.a,Object.assign({error:F.segments},e,{variant:"outlined",placeholder:"Search here"})),n.a.createElement(O.a,null,T.segments))}),n.a.createElement(j.a,{className:e.divider}),n.a.createElement(u.a,{multiple:!0,id:"tags-filled",options:s.locations,value:t.locations,onChange:(e,a)=>{this.setState({reachData:Object(m.a)(Object(m.a)({},t),{},{locations:a})})},renderTags:(e,a)=>e.map((e,t)=>n.a.createElement(y.a,Object.assign({label:e},a({index:t})))),renderInput:e=>n.a.createElement(k.a,{error:F.locations},n.a.createElement(v.a,null,"Locations"),n.a.createElement(N.a,Object.assign({error:F.locations},e,{variant:"outlined",placeholder:"Search here"})),n.a.createElement(O.a,null,T.locations))}),n.a.createElement(j.a,{className:e.divider}),n.a.createElement(k.a,{error:F.genders},n.a.createElement(v.a,null,"Genders"),n.a.createElement(S.a,{row:!0},s.names.genderNames.map(e=>n.a.createElement(C.a,{key:e,control:n.a.createElement(x.a,{color:"primary",checked:R.indexOf(e)>-1,name:"genders",value:e,onChange:this.handleSelectChange.bind(this)}),label:e}))),n.a.createElement(O.a,null,T.genders)),n.a.createElement(j.a,{light:!0,className:e.divider}),n.a.createElement(k.a,{error:F.ages},n.a.createElement(v.a,null,"Ages"),n.a.createElement(S.a,{row:!0},s.names.ageNames.map(e=>n.a.createElement(C.a,{key:e,control:n.a.createElement(x.a,{name:"ages",value:e,onChange:this.handleSelectChange.bind(this),color:"primary",checked:b.indexOf(e)>-1}),label:e}))),n.a.createElement(O.a,null,T.ages)),n.a.createElement(j.a,{className:e.divider}),n.a.createElement(k.a,{error:F.mediums},n.a.createElement(v.a,null,"Mediums"),n.a.createElement(S.a,{row:!0},s.names.mediumNames.map(e=>n.a.createElement(C.a,{key:e,control:n.a.createElement(x.a,{color:"primary",checked:l.indexOf(e)>-1,name:"mediums",value:e,onChange:this.handleSelectChange.bind(this)}),label:e}))),n.a.createElement(O.a,null,T.mediums)),n.a.createElement(j.a,{light:!0,className:e.divider}),n.a.createElement(k.a,{error:F.date},n.a.createElement(v.a,null,"Duration"),n.a.createElement(S.a,{row:!0},n.a.createElement(g.DateRangePicker,{startDateId:"durationStart",endDateId:"durationEnd",firstDayOfWeek:1,startDate:c,endDate:i,displayFormat:"DD-MM-YYYY",focusedInput:s.focusedInput,onFocusChange:e=>this.setState({formData:Object(m.a)(Object(m.a)({},s),{},{focusedInput:e})}),onDatesChange:this.handleDuration,startDatePlaceholderText:" Start date",endDatePlaceholderText:" End date"})),n.a.createElement(O.a,null,T.date)),n.a.createElement(j.a,{className:e.divider}),n.a.createElement(k.a,{error:r.backtrack},n.a.createElement(v.a,null,"Backtrack Data"),n.a.createElement(S.a,{row:!0},n.a.createElement(g.DateRangePicker,{startDateId:"backtrackStart",endDateId:"backtrackEnd",isOutsideRange:e=>!Object(g.isInclusivelyBeforeDay)(e,E()()),firstDayOfWeek:1,startDate:o,endDate:p,displayFormat:"DD-MM-YYYY",focusedInput:s.backtrackFocusedInput,onFocusChange:e=>this.setState({formData:Object(m.a)(Object(m.a)({},s),{},{backtrackFocusedInput:e})}),onDatesChange:this.handleBacktrack,startDatePlaceholderText:" Start date",endDatePlaceholderText:" End date"})),n.a.createElement(O.a,null,"*optional: use data from a period of time")),n.a.createElement(j.a,{className:e.divider}),n.a.createElement(k.a,null,n.a.createElement(S.a,{component:"legend"},n.a.createElement(v.a,null,"Comments"),n.a.createElement(N.a,{name:"comments",onChange:this.handleChange.bind(this),color:"primary",multiline:!0,variant:"outlined"})),n.a.createElement(O.a,null,T.comments))),n.a.createElement(I.a,{className:e.buttons,onClick:()=>this.uploadFormula(),variant:"contained",size:"large",color:"primary"},"Submit"))}}var T=Object(b.a)(e=>({root:{flexGrow:1},divider:{marginTop:e.spacing(2.5),marginBottom:e.spacing(2.5)},buttons:{margin:"auto"},alert:{marginBottom:e.spacing(2.5)}}),{withTheme:!0})(F);const H=Object(l.a)(e=>({root:{flexGrow:1,backgroundColor:"#757ce8"},paper:{marginLeft:e.spacing(8),marginRight:e.spacing(8)},calculateReach:{padding:e.spacing(4)}}));function V(){const e=H();return n.a.createElement("div",{className:e.root},n.a.createElement(c.a,{className:e.paper},n.a.createElement(i.a,null,n.a.createElement(o.a,{color:"textSecondary",className:e.title,variant:"h4",noWrap:!0},"Out-of-Home Reach Request Form")),n.a.createElement("div",{className:e.calculateReach},n.a.createElement(T,null))))}Object(s.render)(n.a.createElement(V,null),document.querySelector("#root"))}},[[184,1,2]]]);
//# sourceMappingURL=main.d24d45d5.chunk.js.map